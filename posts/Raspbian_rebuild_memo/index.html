<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.24.40"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">Raspberry Pi重装笔记 | 浅色圆锥曲线爱好者</title><link data-react-helmet="true" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@4/distr/fira_code.css"/><link data-react-helmet="true" rel="canonical" href="https://blog.yue.coffee/posts/Raspbian_rebuild_memo"/><meta data-react-helmet="true" name="description" content="blog of yue: 记录一下重装过程。 6月末买的RaspberryPi 3B，到现在运行的还不错，一直非root账号操作……没想到还是被我折腾坏了。虽然已安装的内容还能正常运行，但所有apt-get相关命令都用不了……这就很麻烦了。 一开始是 E: Sub-process /usr/bin/dpkg returned an error..."/><meta data-react-helmet="true" property="og:title" content="Raspberry Pi重装笔记"/><meta data-react-helmet="true" property="og:description" content="blog of yue: 记录一下重装过程。 6月末买的RaspberryPi 3B，到现在运行的还不错，一直非root账号操作……没想到还是被我折腾坏了。虽然已安装的内容还能正常运行，但所有apt-get相关命令都用不了……这就很麻烦了。 一开始是 E: Sub-process /usr/bin/dpkg returned an error..."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="yue"/><meta data-react-helmet="true" name="twitter:title" content="Raspberry Pi重装笔记"/><meta data-react-helmet="true" name="twitter:description" content="blog of yue: 记录一下重装过程。 6月末买的RaspberryPi 3B，到现在运行的还不错，一直非root账号操作……没想到还是被我折腾坏了。虽然已安装的内容还能正常运行，但所有apt-get相关命令都用不了……这就很麻烦了。 一开始是 E: Sub-process /usr/bin/dpkg returned an error..."/><style data-styled="" data-styled-version="5.2.1">.NfRVw{font-size:1rem;background-color:#333;box-shadow:0 1px 3px #000;color:#fff;padding:0.5rem;}/*!sc*/
data-styled.g14[id="footer__GlobalFooter-sc-6bj9pp-0"]{content:"NfRVw,"}/*!sc*/
.jWShHr{background:#333;box-shadow:0 0 3px #000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;color:#ccc;text-align:left;font-size:1rem;padding:0.5rem;}/*!sc*/
data-styled.g15[id="header__GlobalHeader-sc-1d76vqs-0"]{content:"jWShHr,"}/*!sc*/
.hSDgvG > a{margin:0 10px;}/*!sc*/
@media screen and (max-width:700px){.hSDgvG{display:none;}}/*!sc*/
data-styled.g17[id="header__RightCorner-sc-1d76vqs-2"]{content:"hSDgvG,"}/*!sc*/
@font-face{font-family:'great-vibes-merge';unicode-range:U+0021-007A;src:url('/fonts/GreatVibes-Regular.woff2') format('woff2');}/*!sc*/
@font-face{font-family:'noto-serif-sc';src:url('/fonts/NotoSerifSC-Regular.subset.woff2') format('woff2');unicode-range:U+3000-9FFF;}/*!sc*/
*{box-sizing:border-box;-ms-overflow-style:none;-webkit-scrollbar-width:none;-moz-scrollbar-width:none;-ms-scrollbar-width:none;scrollbar-width:none;}/*!sc*/
*::selection{color:#fff;background:skyblue;}/*!sc*/
::-webkit-scrollbar{display:none;width:0px;background:transparent;}/*!sc*/
html,body{font-family:sans-serif;text-align:center;font-size:20px;color:#ffffff;margin:0;padding:0;width:100%;height:100%;background-color:#1d1d1d;}/*!sc*/
ul{margin:0;padding:0;list-style:none;}/*!sc*/
a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
#___gatsby{width:100%;min-height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
#___gatsby > div{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-height:100%;}/*!sc*/
main{padding-bottom:3rem;}/*!sc*/
data-styled.g19[id="sc-global-cEbgiz1"]{content:"sc-global-cEbgiz1,"}/*!sc*/
.ctnZPS pre{background-color:#333;padding:1rem;font-size:0.9rem;overflow:scroll;text-align:left;border:0;box-shadow:0 0 10px #111;border-radius:10px;}/*!sc*/
.ctnZPS pre code{font-family:"Fira Code";background:none;text-shadow:none;}/*!sc*/
.ctnZPS pre code .keyword{color:hotpink;}/*!sc*/
.ctnZPS pre code .punctuation{color:skyblue;}/*!sc*/
.ctnZPS pre code .tag{color:hotpink;}/*!sc*/
.ctnZPS pre code .builtin{color:mediumpurple;}/*!sc*/
.ctnZPS pre code .operator{color:hotpink;}/*!sc*/
.ctnZPS pre code .function{color:#ffd54f;}/*!sc*/
.ctnZPS pre code .constant{color:mediumpurple;}/*!sc*/
.ctnZPS pre code .parameter{color:#fb8c00;}/*!sc*/
.ctnZPS pre code .string{color:yellowgreen;}/*!sc*/
.ctnZPS pre code .comment{color:#555;}/*!sc*/
.ctnZPS pre code .class-name{color:skyblue;}/*!sc*/
data-styled.g20[id="codeBlock-sc-12lvfgr-0"]{content:"ctnZPS,"}/*!sc*/
.iGRAlZ{margin:0 auto;width:80%;padding-bottom:8rem;}/*!sc*/
@media screen and (max-width:700px){.iGRAlZ{width:90%;}}/*!sc*/
data-styled.g21[id="comments__CommentBlock-sc-9weum8-0"]{content:"iGRAlZ,"}/*!sc*/
.issIJo{margin:0 auto;padding-bottom:1rem;text-align:left;max-width:1000px;word-break:break-all;width:90%;color:#ccc;font-family:"Fira Code";}/*!sc*/
.issIJo > *{max-width:100%;}/*!sc*/
.issIJo h2,.issIJo h3,.issIJo h4,.issIJo h5,.issIJo h6{margin-top:3rem;color:#eee;position:relative;}/*!sc*/
.issIJo h2::before,.issIJo h3::before,.issIJo h4::before,.issIJo h5::before,.issIJo h6::before{content:"○";position:absolute;color:#607d8b;top:0;left:-1.5rem;}/*!sc*/
.issIJo h2::before{content:"#";}/*!sc*/
.issIJo h3::before{content:"◆";}/*!sc*/
.issIJo del{color:#555;}/*!sc*/
.issIJo img{-webkit-transition:0.3s all ease-in-out;transition:0.3s all ease-in-out;display:block;margin:2rem auto;max-width:100%;object-fit:contain;opacity:0.8;}/*!sc*/
.issIJo img:hover{opacity:1;}/*!sc*/
.issIJo a{position:relative;z-index:1;}/*!sc*/
.issIJo a::after{-webkit-transition:0.3s all ease-in-out;transition:0.3s all ease-in-out;content:" ";position:absolute;width:100%;height:2px;background-color:#607d8b;left:0;bottom:0;z-index:-1;}/*!sc*/
.issIJo a:hover{color:#fff;text-shadow:0 0 3px #000;}/*!sc*/
.issIJo a:hover::after{background-color:hotpink;}/*!sc*/
.issIJo ul{list-style:disc;padding-left:1rem;}/*!sc*/
.issIJo table{margin:3rem auto;border-collapse:collapse;}/*!sc*/
.issIJo table th,.issIJo table tr,.issIJo table td{padding:10px;border:3px solid #333;}/*!sc*/
.issIJo blockquote{padding:1rem;margin:1rem 0;background-color:#333;}/*!sc*/
.issIJo code{text-shadow:0 0 5px #000;word-break:break-word;border-radius:5px;margin:5px 2px;display:inline-block;padding:1px 5px;font-family:"Fira Code";background-image:linear-gradient(100deg,#455a64 47%,#757575);}/*!sc*/
.issIJo iframe{width:80%;margin:0 auto;display:inherit;}/*!sc*/
@media screen and (max-width:700px){.issIJo h2::before,.issIJo h3::before,.issIJo h4::before,.issIJo h5::before,.issIJo h6::before{top:0.2rem;font-size:1rem;left:-1rem;}.issIJo iframe{max-width:100%;width:100%;}}/*!sc*/
data-styled.g22[id="markdownContent__MarkdownContentBlock-sc-1c6mo1j-0"]{content:"issIJo,"}/*!sc*/
.gGdKwU{font-size:inherit;padding:1rem;font-family:'great-vibes-merge','noto-serif-sc';-webkit-filter:drop-shadow(0 0 3px #000);filter:drop-shadow(0 0 3px #000);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;display:inline-block;font-weight:normal;text-align:center;background:linear-gradient(180deg,skyblue,#e91e63);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}/*!sc*/
@media screen and (max-width:700px){.gGdKwU{font-size:4rem;}}/*!sc*/
data-styled.g23[id="gradientFont-sc-6873be-0"]{content:"gGdKwU,"}/*!sc*/
.cyZxmM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:4rem;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}/*!sc*/
.cyZxmM a{margin:1rem;}/*!sc*/
@media screen and (max-width:700px){.cyZxmM{margin:0;margin-bottom:3rem;}.cyZxmM a{margin:1rem 5px;}}/*!sc*/
data-styled.g53[id="pagination__PaginationNav-sc-1nud1ku-0"]{content:"cyZxmM,"}/*!sc*/
.iENrYe{-webkit-transition:0.5s all cubic-bezier(0.4,0,0.2,1);transition:0.5s all cubic-bezier(0.4,0,0.2,1);box-shadow:#0 0 5px #000;background:#333;color:none;border-radius:5px;padding:0.5rem;background-size:200%,150%;}/*!sc*/
.iENrYe:hover{background-color:#e91e63;}/*!sc*/
data-styled.g54[id="pagination__PaginationLink-sc-1nud1ku-1"]{content:"iENrYe,"}/*!sc*/
.kUfmsL{font-size:4rem;word-break:break-word;margin-bottom:1rem;}/*!sc*/
@media screen and (max-width:700px){.kUfmsL{font-size:4rem;}}/*!sc*/
data-styled.g58[id="post__PostTitle-sc-1xlzpqm-0"]{content:"kUfmsL,"}/*!sc*/
.entpDK{font-size:1.5rem;color:#666;margin-bottom:2rem;display:inline-block;text-shadow:0 0 1rem #000;}/*!sc*/
data-styled.g59[id="post__PostDate-sc-1xlzpqm-1"]{content:"entpDK,"}/*!sc*/
</style><link rel="icon" href="/favicon-32x32.png?v=9cddaf2e6e675db0946c978328f41acf" type="image/png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#333333"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9cddaf2e6e675db0946c978328f41acf"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9cddaf2e6e675db0946c978328f41acf"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9cddaf2e6e675db0946c978328f41acf"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9cddaf2e6e675db0946c978328f41acf"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9cddaf2e6e675db0946c978328f41acf"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9cddaf2e6e675db0946c978328f41acf"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9cddaf2e6e675db0946c978328f41acf"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9cddaf2e6e675db0946c978328f41acf"/><link as="script" rel="preload" href="/webpack-runtime-d923c6fb6dcf484f6deb.js"/><link as="script" rel="preload" href="/framework-d018bf9a55d82f10618c.js"/><link as="script" rel="preload" href="/app-8674ff2d423d1c45de71.js"/><link as="script" rel="preload" href="/2c282eaea363d2bbd23f6fd873d3621ed8cccc49-00a73d1bcd5f8ea4550f.js"/><link as="script" rel="preload" href="/2595aca8b7d3d21cc09d2fd82059f82ae42ef8db-7d5256a5ccad346d8436.js"/><link as="script" rel="preload" href="/component---src-templates-post-index-tsx-9c30019c67020881d90e.js"/><link as="fetch" rel="preload" href="/page-data/posts/Raspbian_rebuild_memo/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1132682437.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3649515864.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/764694655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header class="header__GlobalHeader-sc-1d76vqs-0 jWShHr"><span class="header__LeftCorner-sc-1d76vqs-1 hlA-dLO"><a href="/">浅色圆锥曲线爱好者</a></span><span class="header__RightCorner-sc-1d76vqs-2 hSDgvG"><a href="/posts">Posts</a><a href="/notes">Notes</a><a href="/aboutme">About</a></span></header><main style="opacity:0"><div><h1 class="post__PostTitle-sc-1xlzpqm-0 kUfmsL"><span class="gradientFont-sc-6873be-0 gGdKwU">Raspberry Pi重装笔记</span></h1><time class="post__PostDate-sc-1xlzpqm-1 entpDK">2017-11-28</time><article class="codeBlock-sc-12lvfgr-0 markdownContent__MarkdownContentBlock-sc-1c6mo1j-0 ctnZPS issIJo"><p>记录一下重装过程。</p><p>6月末买的RaspberryPi 3B，到现在运行的还不错，一直非root账号操作……没想到还是被我折腾坏了。虽然已安装的内容还能正常运行，但所有<code class="language-text">apt-get</code>相关命令都用不了……这就很麻烦了。</p><p>一开始是</p><p><code class="language-text">E: Sub-process /usr/bin/dpkg returned an error code (1)</code></p><p>经过一顿操作变成了</p><p><code class="language-text">Couldn&#x27;t configure python:armhf, probably a dependency cycle.</code></p><p>再经过一顿操作变成了</p><p><code class="language-text">debconf 需要重新安装,但是我无法找到相应的安装文件</code> </p><p>emmmm  (´Д` )</p><p><img src="https://farm5.staticflickr.com/4569/26953360409_0cb5b78ef8_z.jpg"/></p><p>主要原因估计还是损坏了系统的python3和dpkg库。正好对淘宝商家附带的中文系统不是很满意，干脆重新安装一下算了。</p><hr/><h3> 下载官方OS</h3><p>地址: <code class="language-text">https://www.raspberrypi.org/downloads/</code></p><p>虽说这样，还是想少折腾。依然选择了<code class="language-text">Raspbian</code></p><hr/><h3> 使用etcher烧录系统</h3><p>同样使用官方推荐的etcher</p><p>地址: <code class="language-text">https://etcher.io/</code></p><p>有Flashing和Validating两步</p><p><img src="https://farm5.staticflickr.com/4554/38685276372_0e4fc4211e_c.jpg"/></p><p><img src="https://farm5.staticflickr.com/4542/37829722295_bff89c34a8_c.jpg"/></p><hr/><h3> 配置WiFi</h3><p>之前刚到手的时候是先连网线再配置Wi-Fi的，其实可以从sd卡直接配置自动连接Wi-Fi。</p><p> 读入烧录好的sd卡，新建 wpa_supplicant.conf 文件置于/boot 目录下。</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">country=CN
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
 
network={
ssid=&quot;WiFi名称&quot;
psk=&quot;密码&quot;
key_mgmt=WPA-PSK #无密码时key_mgmt=NONE，这处是WAP/WAP2
priority=1 #优先级
#scan_ssid=1 需要连接隐藏WiFi时
}</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><hr/><h3> 配置SSH </h3><p>同新建名为<code class="language-text">ssh</code>的空文件（无后缀）文件置于/boot 目录下。</p><hr/><h3> 通过路由器查询设备地址 </h3><p>访问	<code class="language-text">192.168.0.1</code>查询设备地址</p><p><img src="https://farm5.staticflickr.com/4551/37829696585_dff7a7fc97.jpg"/></p><p>因为之前设置过内网地址绑定MAC，所以不需要更改</p><hr/><h3> SSH登录 </h3><p>如果此时直接和之前一样敲入<code class="language-text">$ ssh pi@192.168.0.107</code>可以看到如下警告：</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">YmbzzdeMacBook-Air:Desktop Cordial$ ssh pi@192.168.0.107
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the ECDSA key sent by the remote host is
SHA256:FcKrrQO3c/ZPU5U6WH+rYderuSpvntdYpOY3rMG3hbY.
Please contact your system administrator.
Add correct host key in /Users/Cordial/.ssh/known_hosts to get rid of this message.
Offending ECDSA key in /Users/Cordial/.ssh/known_hosts:10
ECDSA host key for 192.168.0.107 has changed and you have requested strict checking.
Host key verification failed.</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p>这时可以先删除保存在本地的ssh秘钥。
MAC下输入：  </p><p><code class="language-text">$	open /Users/Cordial/.ssh/</code></p><p>从打开文件夹的<code class="language-text">known_hosts</code>文件中删除对应ip的内容，具体大致如下:</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">192.168.0.107 ecdsa-sha2-nistp256 
…………</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div><p>保存后再重新使用<code class="language-text">$ ssh pi@192.168.0.107</code>命令，和之前一样可以正常登录了。初始化信息如下：</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">用户名:pi    
密码: raspberry</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div><hr/><h3> 初步更改 </h3><p>当然要先改密码。使用<code class="language-text">$ passwd</code>命令就好</p><p>配置免密码登录
<code class="language-text">$ ssh-copy-id -i ~/.ssh/id_rsa.pub pi@192.168.0.107（对应ssh地址）</code></p><p>（没有公钥时 <code class="language-text">$ ssh-keygen -t rsa</code>）</p><p>配置alias</p><p><code class="language-text">alias pi=&quot;ssh pi@192.168.0.107&quot;</code></p><p>然后是系统时间。使用<code class="language-text">$ sudo raspi-config</code>选择对应地区城市。</p><p>然后是正常更新:</p><p><code class="language-text">$ sudo apt-get update</code>  </p><p><code class="language-text">$ sudo apt-get upgrade</code></p><hr/><h3> 配置Python3.6 </h3><p>参考了<code class="language-text">https://gist.github.com/dschep/24aa61672a2092246eaca2824400d37f</code></p><p>具体步骤如下:</p><p>1.安装依赖
<code class="language-text">$ sudo apt-get install build-essential tk-dev libncurses5-dev libncursesw5-dev libreadline6-dev libdb5.3-dev libgdbm-dev libsqlite3-dev libssl-dev libbz2-dev libexpat1-dev liblzma-dev zlib1g-dev</code></p><p>(如果有找不到的包，尝试新版本，比如<code class="language-text">libdb5.4-dev</code> 代替 <code class="language-text">libdb5.3-dev</code>)</p><p>2.下载安装python</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">$ wget https://www.python.org/ftp/python/3.6.0/Python-3.6.0.tar.xz
$ tar xf Python-3.6.0.tar.xz
$ cd Python-3.6.0
$ ./configure
$ make
$ sudo make altinstall</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><p>其中<code class="language-text">sudo make altinstall</code>使得我们可以不影响系统内部依赖，不对系统造成影响。
在使用命令的时候，同样要使用<code class="language-text">python3.6</code>，<code class="language-text">pip3.6</code>，因为之前就是mess up了系统的python库导致了很多问题，暂时还不替换<code class="language-text">symbolic link</code>。</p><p>3.(自选)清理安装包</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">$ sudo rm -r Python-3.6.0
$ rm Python-3.6.0.tgz
$ sudo apt-get --purge remove build-essential tk-dev
$ sudo apt-get --purge remove libncurses5-dev libncursesw5-dev libreadline6-dev
$ sudo apt-get --purge remove libdb5.3-dev libgdbm-dev libsqlite3-dev libssl-dev
$ sudo apt-get --purge remove libbz2-dev libexpat1-dev liblzma-dev zlib1g-dev
$ sudo apt-get autoremove
$ sudo apt-get clean</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div><hr/><h3> 然后当然最重要的是先配置ssr</h3><p>为了解决<code class="language-text">DNS</code>污染，依赖<code class="language-text">proxychains</code>。参考了<code class="language-text">https://blog.fazero.me/2015/08/31/%E5%88%A9%E7%94%A8proxychains%E5%9C%A8%E7%BB%88%E7%AB%AF%E4%BD%BF%E7%94%A8socks5%E4%BB%A3%E7%90%86/</code></p><p>先</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">$ git clone https://github.com/rofl0r/proxychains-ng.git
cd proxychains-ng</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span></span></pre></div><p>但之后按照这上面链接的安装过程会报错。</p><p>查阅官方<code class="language-text">github</code>页面，安装说明如下:</p><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">$ ./configure --prefix=/usr --sysconfdir=/etc
$ make
$ [optional] sudo make install
$ [optional] sudo make install-config (installs proxychains.conf) </code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div><p>按照这个步骤可以正常安装。</p><p>修改<code class="language-text">proxychains.conf</code></p><p><code class="language-text">$ nano /etc/proxychains.conf</code>，修改<code class="language-text">socks4 127.0.0.1 9095</code>为<code class="language-text">socks5 127.0.0.1 1080（本地ssr端口）</code></p><p>安装<code class="language-text">screen</code></p><p><code class="language-text">$ sudo apt-get install screen</code></p><p>通过<code class="language-text">sftp</code>连接上传保存的ssr文件（带已经配置好的配置文件）。</p><p>创建<code class="language-text">screen</code>，切换到ssr目录</p><p><code class="language-text">$ python3 local.py</code></p><p>配置完之后测试</p><p><code class="language-text">$ sudo proxychains4 curl https://www.twitter.com/</code></p><hr/><h3>配置VNC</h3><p><code class="language-text">$ sudo apt-get install tightvncserver</code></p><p>开启:</p><p><code class="language-text">$ vncserver</code></p><hr/><h3>配置python常用库</h3><p><code class="language-text">sudo pip3.6 install qqbot</code><br/>
<code class="language-text">sudo pip3.6 install itchat </code><br/>
<code class="language-text">sudo pip3.6 install tweepy </code><br/>
<code class="language-text">……</code></p><hr/><h3>安装PhantomJS</h3><div class="gatsby-highlight" data-language="text"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">$ sudo apt-get install libfontconfig1 libfreetype6 libpng12-0
$ curl -o /tmp/phantomjs -sSL https://github.com/fg2it/phantomjs-on-raspberry/releases/download/v2.1.1-wheezy-jessie/phantomjs
$ sudo mv /tmp/phantomjs /usr/local/bin/phantomjs
$ sudo chmod a+x /usr/local/bin/phantomjs</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div><p>使用<code class="language-text">$ phantomjs --version</code>确认</p><hr/><p>到此为止个人的需求也就差不多了，除去下载必要的镜像和工具软件等，算上查阅资料的时间差不多两个小时，比想象中快得多。</p><p>如果某一天再出现什么需要重装的问题，感觉不会很方了，也从这件事认识到果然系统的备份还是很重要的。</p></article></div><nav class="pagination__PaginationNav-sc-1nud1ku-0 cyZxmM"><a href="/posts/selenium&amp;wyy2"><span class="pagination__PaginationLink-sc-1nud1ku-1 iENrYe">&lt; selenium优化</span></a><a href="/posts/selenium&amp;wyy"><span class="pagination__PaginationLink-sc-1nud1ku-1 iENrYe">selenium自动收藏网易云曲目 &gt;</span></a></nav><div class="comments__CommentBlock-sc-9weum8-0 iGRAlZ"><div shortname="yue-blog" config="[object Object]" id="disqus_thread"></div></div></main></div><footer class="footer__GlobalFooter-sc-6bj9pp-0 NfRVw">© <!-- -->2021</footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/Raspbian_rebuild_memo";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2b9c2143bc2048f0e806.js"],"app":["/app-8674ff2d423d1c45de71.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-3366c0891f0c3afc2f72.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-a5ad74968dbce0588591.js"],"component---src-pages-aboutme-tsx":["/component---src-pages-aboutme-tsx-3adb37c1e0fb93bfb09c.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-b9d3c82973606f4d0eb7.js"],"component---src-pages-ogp-tsx":["/component---src-pages-ogp-tsx-13617ce9f806ce325ad7.js"],"component---src-templates-note-archive-tsx":["/component---src-templates-note-archive-tsx-edcf0e20c4902314ab66.js"],"component---src-templates-note-index-tsx":["/component---src-templates-note-index-tsx-f0d84ed1557a5d10746c.js"],"component---src-templates-post-archive-tsx":["/component---src-templates-post-archive-tsx-1e13a47d11a27bcb52fb.js"],"component---src-templates-post-index-tsx":["/component---src-templates-post-index-tsx-9c30019c67020881d90e.js"]};/*]]>*/</script><script src="/polyfill-2b9c2143bc2048f0e806.js" nomodule=""></script><script src="/component---src-templates-post-index-tsx-9c30019c67020881d90e.js" async=""></script><script src="/2595aca8b7d3d21cc09d2fd82059f82ae42ef8db-7d5256a5ccad346d8436.js" async=""></script><script src="/2c282eaea363d2bbd23f6fd873d3621ed8cccc49-00a73d1bcd5f8ea4550f.js" async=""></script><script src="/app-8674ff2d423d1c45de71.js" async=""></script><script src="/framework-d018bf9a55d82f10618c.js" async=""></script><script src="/webpack-runtime-d923c6fb6dcf484f6deb.js" async=""></script></body></html>